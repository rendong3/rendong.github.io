<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://rendong3.github.io/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://rendong3.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-23-龙芯--自主架构先驱者" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/23-%E9%BE%99%E8%8A%AF--%E8%87%AA%E4%B8%BB%E6%9E%B6%E6%9E%84%E5%85%88%E9%A9%B1%E8%80%85/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.726Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>这是ren_dong的第<strong>23</strong>篇原创</p>
</blockquote>
<h1 id="龙芯–自主架构先驱者"><a href="#龙芯–自主架构先驱者" class="headerlink" title="龙芯–自主架构先驱者"></a>龙芯–自主架构先驱者</h1><h2 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h2><blockquote>
<p><strong>自主可控最高的 MIPS 架构 CPU</strong></p>
</blockquote>
<p><img src="https://gitee.com/dognren/typora-image/raw/master/Image/202402010959962.png"></p>
<ul>
<li>龙芯是我国最早研制的高性能通用处理器系列，拥有 MIPS 指令的永久授权，并拓展出了自己的指令集loong ISA。</li>
<li>龙芯采用<strong>自主 Loong ISA 指令系统</strong>，兼容 MIPS 指令，所有 IP 模块皆为自主设计，拥有片内安全机制</li>
<li>龙芯处理器以 32 位核、 64 位单核及多核 CPU&#x2F;SOC 为主，主要面向高端嵌入式、个人电脑、服务器和高性能机等应用</li>
</ul>
<h2 id="2、发展历程"><a href="#2、发展历程" class="headerlink" title="2、发展历程"></a>2、发展历程</h2><blockquote>
<p>从MIPS授权到自主研发LoongArch</p>
</blockquote>
<ol>
<li>2008年公司成立，前身出自中科院计算机所</li>
<li>2009年一次性买断，获得MIPS32和MIPS64架构的永久授权</li>
<li>2020前一直基于MIPS，此后在MIPS固有指令集添加自主研发指令集，研发出自主知识产权的<strong>龙芯指令集（LoogISA）</strong></li>
<li>2021年信息技术应用创新主论坛发布<strong>龙芯自主指令系统架构（LoongArch）</strong></li>
<li>2021年开始市场化运作，2022年6月在科创板上市</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/1606c911-e0fc-42f5-a89f-1fb70d721753.png"></p>
<p><img src="https://files.mdnice.com/user/17335/5b5a714d-4117-4911-9a1c-08c9e0a18111.png"></p>
<h2 id="3、产品体系"><a href="#3、产品体系" class="headerlink" title="3、产品体系"></a>3、产品体系</h2><ol>
<li>公司经营主要采用Fabless模式：公司主要负责芯片的设计工作，形成集成电路设计版图 ，将晶圆制造、封装、部分测试等环节委托给相关制造企业及代工厂商加工完成。</li>
<li>龙芯产品均基于<strong>自研的LoongArch 架构</strong>，主要包括面向行业应用的“<strong>龙芯 1 号</strong>”小 CPU、面向工控和终端类应用的“<strong>龙芯 2 号</strong>”中 CPU、以及面向桌面与服务器类应用的“<strong>龙芯 3 号</strong>”大 CPU</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/6b29c888-baf3-42f8-9a3c-4a7a0325f4b7.png"></p>
<h2 id="4、产品介绍"><a href="#4、产品介绍" class="headerlink" title="4、产品介绍"></a>4、产品介绍</h2><h3 id="4-1、龙芯3A-3B5000"><a href="#4-1、龙芯3A-3B5000" class="headerlink" title="4.1、龙芯3A&#x2F;3B5000"></a>4.1、龙芯3A&#x2F;3B5000</h3><ul>
<li>龙芯3A5000是龙芯中科最新款桌面CPU，基于LoongArch指令集，基于龙芯3A4000引脚兼容，频率提升至2.5GHz，功耗降低30%，性能提升50%以上</li>
<li>龙芯3B5000在龙芯3A5000基础上支持多路互联</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/9b7acc46-8d8d-49e2-954a-5b7a5cb4bb8f.png"></p>
<h3 id="4-2、龙芯3C5000L"><a href="#4-2、龙芯3C5000L" class="headerlink" title="4.2、龙芯3C5000L"></a>4.2、龙芯3C5000L</h3><ul>
<li>龙芯3C5000L封装集成4个3A5000，形成16核处理器<br><img src="https://files.mdnice.com/user/17335/c466a51c-4dac-4f5a-9781-e215ca07e2a2.png"></li>
</ul>
<h3 id="4-3、龙芯3A6000"><a href="#4-3、龙芯3A6000" class="headerlink" title="4.3、龙芯3A6000"></a>4.3、龙芯3A6000</h3><ul>
<li>龙芯第四代微架构首款处理器，面向高端嵌入式计算机、桌面、服务器等应用。</li>
<li>采用自主龙芯指令集（LoongArch™），基于全新研制的LA664处理器核，较龙芯3A5000单核定&#x2F;浮点性能分别提升60%和90%，多核定&#x2F;浮点性能分别提升100%和90%。</li>
<li>龙芯3A6000处理器 SPEC CPU 2006 Base单线程定&#x2F;浮点分值分别达到43.1&#x2F;54.6分，达到国际市场主流水平</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/4308b39c-d059-4a6e-9fad-8b4fcaad90ba.png"></p>
<h2 id="5、劣势"><a href="#5、劣势" class="headerlink" title="5、劣势"></a>5、劣势</h2><ol>
<li><p><strong>多核性能弱</strong>：龙芯CPU是我国最早的国产CPU厂商，但其更集中于专用类、嵌入式 CPU，通用类 CPU 单核性能较高，但多核能力较弱</p>
</li>
<li><p><strong>生态差</strong>：龙芯是国内唯一基于 MIPS 架构的国产 CPU，在生态构建方面劣势明显</p>
</li>
</ol>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>码字不易，欢迎<strong>关注、点赞</strong>，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/23-%E9%BE%99%E8%8A%AF--%E8%87%AA%E4%B8%BB%E6%9E%B6%E6%9E%84%E5%85%88%E9%A9%B1%E8%80%85/" data-id="cls9w8ke3000fdkvhezqs4py6" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-22-CPU相关专业名词" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/22-CPU%E7%9B%B8%E5%85%B3%E4%B8%93%E4%B8%9A%E5%90%8D%E8%AF%8D/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.710Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、CPU"><a href="#1、CPU" class="headerlink" title="1、CPU"></a>1、CPU</h2><ol>
<li><strong>中央处理器CPU（Central Processing Unit）是计算机的运算和控制核心</strong>，可以理解为PC及服务器的大脑 </li>
<li>CPU与内部存储器和输入&#x2F;输出设备合称为电子计算机三大核心部件</li>
<li>CPU的本质是一块超大规模的集成电路，主要功能是解释计算机指令以及处理计算机软件中的数据<br><img src="https://files.mdnice.com/user/17335/6d2a022d-eb8f-4833-902e-f3658f0c2d84.png" alt="结构及工作原理"></li>
<li>CPU的内部结构可分为<strong>控制单元，运算单元和存储单元</strong>三大部分。  </li>
<li>CPU的工作原理：控制单元根据指令，将存储器中的数据发送至运算单元，经运算单元处理后的数据再存储在存储单元中，最后交由应用程序使用</li>
</ol>
<h2 id="2、指令集"><a href="#2、指令集" class="headerlink" title="2、指令集"></a>2、指令集</h2><ul>
<li><strong>指令集是CPU性能体现的重要标志</strong>，CPU要有较好的性能，需要具备功能齐全、通用性强、内含丰富的指令集</li>
<li>指令集一般被整合在操作系统内核最底层的硬件抽象层中。<strong>指令集属于计算机中硬件与软件的接口</strong>，它向操作系统定义了CPU的基本功能。指令集包括指令格式、寻址方式和数据形式</li>
</ul>
<h3 id="2-1、指令集分类"><a href="#2-1、指令集分类" class="headerlink" title="2.1、指令集分类"></a>2.1、指令集分类</h3><p>CPU指令集分为复杂和精简两类</p>
<ul>
<li><p><strong>复杂指令集CISC</strong>：<strong>由一条指令完成一个复杂的基本功能</strong>；单条指令集功能强，指令类型丰富完善，编译后指令数量较少，通用场景下性能具有优势。复杂指令集以x86架构为代表，主要用于桌面PC及服务器领域，配套软硬件丰富完善。</p>
</li>
<li><p><strong>精简指令集RISC</strong>：由<strong>一条指令完成一个基本动作，多条指令组合完成一个复杂的基本功能</strong>；译码效率高，偏向低功 耗领域优化。精简指令集以ARM架构为代表，主要用于手机、平板等移动终端，软硬件生态逐步建设完善。</p>
</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/bd641c50-143b-4cf2-b431-f5f17ee9334d.png"></p>
<h2 id="3、架构"><a href="#3、架构" class="headerlink" title="3、架构"></a>3、架构</h2><ol>
<li>架构一般指的是某类CPU使用的某一具体指令集，大部分情况下，架构等同于指令集</li>
<li>当前<strong>主流芯片架构为ARM和X86</strong>，除此之外还有MIPS、POWER、RISC-V等架构。<br><img src="https://files.mdnice.com/user/17335/478b574f-8a97-41fa-86d6-286efd97d368.png"></li>
</ol>
<h3 id="3-1、架构对比"><a href="#3-1、架构对比" class="headerlink" title="3.1、架构对比"></a>3.1、架构对比</h3><ol>
<li><strong>X86架构</strong>起步较早，生态环境完善，占领了服务器、桌面和PC电脑市场绝大部分份额。</li>
<li><strong>ARM架构</strong>占领了绝大多数移动终端。因为在移动设备行业，X86架构下的复杂指令集会使得移动设备温度过高、耗电过快，难以放入移动设备体积较小的处理器中。</li>
<li><strong>MIPS架构</strong>由MIPS科技公司开发并授权，广泛被使用在许多电子产品、网络设备、个人装置与商业装置上。  </li>
<li><strong>POWER架构</strong>：由IBM公司设计开发，具有高度通用、高 性能等特性，支持从嵌入式系统到超级计算机等平台，在汽车、医疗设备、军事、航空航天等领域都有一席之地。</li>
<li><strong>RISC-V架构</strong>：RISC系列指令集的第五代产品。</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/e8af4202-e55d-4649-83a9-599b032934c4.png"></p>
<h2 id="4、其他概念"><a href="#4、其他概念" class="headerlink" title="4、其他概念"></a>4、其他概念</h2><p>其他概念如<strong>系统架构、芯片版图</strong>等参考B站视频，感谢大佬们的视频分享！</p>
<p><img src="https://files.mdnice.com/user/17335/66d25c93-0efe-4f74-8075-09deb7a450ab.png"></p>
<h2 id="5、指令集到成品CPU"><a href="#5、指令集到成品CPU" class="headerlink" title="5、指令集到成品CPU"></a>5、指令集到成品CPU</h2><ol>
<li>通过<strong>授权或自研</strong>获取某个指令集架构</li>
<li>根据指令集手册完成微架构设计，形成设计文档</li>
<li>通过工程开发形成RTL代码</li>
<li>用EDA软件进行编译和解析，生成芯片版图，交给中芯国际、台积电等工厂进行流片</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/0804af9b-5be8-4918-8a81-5155cd87318a.png"></p>
<h2 id="6、信创国产化"><a href="#6、信创国产化" class="headerlink" title="6、信创国产化"></a>6、信创国产化</h2><ol>
<li>如今CPU行业在全球形成了<strong>Wintel和AA</strong>两大信息化生态体系：<ul>
<li><strong>Wintel即“Windows+Intel”</strong>，由Windows操作系统与X86指令集组成，其实质是Microsoft与Intel的商业联盟。  </li>
<li><strong>AA即“Android+ARM”</strong>，由Android操作系统与ARM指令集组成。</li>
</ul>
</li>
<li>CPU行业具备寡头垄断性质，主流指令集和jia go架构均为美国主导，随着中美两国科技博弈加剧，面对美国不断升级的制裁手段，国内持续加速国产替代进程，目前国内主要有<strong>鲲鹏、飞腾、龙芯、兆芯、海光、申威</strong>，六大国产CPU厂商<br><img src="https://files.mdnice.com/user/17335/ecaeed46-2826-4f38-956d-105a6f59deab.png"></li>
<li>六大厂商发展模式和技术路线也存在差异，后面会有文章进行专门介绍，敬请期待！</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/fec2a7f5-a984-4c53-8e35-cd453142c3db.png"></p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>码字不易，欢迎<strong>关注、点赞</strong>，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/22-CPU%E7%9B%B8%E5%85%B3%E4%B8%93%E4%B8%9A%E5%90%8D%E8%AF%8D/" data-id="cls9w8ke1000ddkvh2z0u86u3" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-21-信创发展之路" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/21-%E4%BF%A1%E5%88%9B%E5%8F%91%E5%B1%95%E4%B9%8B%E8%B7%AF/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.693Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、什么是信创"><a href="#1、什么是信创" class="headerlink" title="1、什么是信创"></a>1、什么是信创</h2><blockquote>
<p>信创，即<strong>信息技术应用创新</strong>，以前也被称为“安可“（安全可控）</p>
</blockquote>
<h3 id="1-1、基本概念"><a href="#1-1、基本概念" class="headerlink" title="1.1、基本概念"></a>1.1、基本概念</h3><p>信创产业主要包括<strong>四大领域</strong>：</p>
<ol>
<li><strong>基础设施</strong>，包括芯片（CPU、GPU等）、存储、服务器、云计算等；</li>
<li><strong>基础软件</strong>，包括操作系统、数据库、中间件等；</li>
<li><strong>应用软件</strong>，包括基础办公软件、企业管理软件（ERP、营销管理、人力资源管理、财务管理、合同管理等）、工业软件、流程优化软件等</li>
<li><strong>信息安全</strong>，包括安全软件、安全硬件、安全服务等。</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/46d4a3c9-2289-40c0-a2f2-8fe2f9f802d0.png"></p>
<h3 id="1-2、发展背景"><a href="#1-2、发展背景" class="headerlink" title="1.2、发展背景"></a>1.2、发展背景</h3><ol>
<li><strong>国际威胁</strong>及关键事件警示</li>
</ol>
<ul>
<li>2003 微软黑屏事件</li>
<li>2013 美国“棱镜门”事件</li>
<li>2018 中兴、华为事件；实体清单事件</li>
</ul>
<ol start="2">
<li><strong>国内政策驱动</strong></li>
</ol>
<ul>
<li>2015 颁布《网络安全法》</li>
<li>2016 “十三五”规划</li>
<li>2021 “十四五”规划</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/baf6546d-66a4-41d8-baab-4000ce1a19a7.png"></p>
<h3 id="1-3、发展目标"><a href="#1-3、发展目标" class="headerlink" title="1.3、发展目标"></a>1.3、发展目标</h3><ul>
<li>信创的核心目的即实现<strong>信息技术产业的完全自主可控</strong></li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/31656ff4-cc74-4eff-87f3-5e85634d4913.png"></p>
<ul>
<li>自主可控<strong>终端全景架构</strong>图：</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/18030e2f-2d6f-4e93-9478-1922f4786bc3.png"></p>
<ul>
<li><strong>云计算全景架构</strong>图：</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/42a5ec8f-ed0a-4bd8-a183-d2d5b690db04.png"></p>
<h3 id="1-4、发展历程"><a href="#1-4、发展历程" class="headerlink" title="1.4、发展历程"></a>1.4、发展历程</h3><ol>
<li><strong>第一阶段</strong>：863、核高基时代</li>
<li><strong>第二阶段</strong>：“棱镜门”事件与去IOE</li>
<li><strong>第三阶段</strong>：应用试点阶段，飞腾、龙芯、兆芯、海光推出新一代处理器</li>
<li><strong>第四阶段</strong>：核心关键行业稳步推进技术创新，全面建设自主IT体系</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/154185b5-3c5f-4f9e-9ff6-094257df6fb8.png"></p>
<h2 id="2、信创产业概况"><a href="#2、信创产业概况" class="headerlink" title="2、信创产业概况"></a>2、信创产业概况</h2><h3 id="2-1、信创体系"><a href="#2-1、信创体系" class="headerlink" title="2.1、信创体系"></a>2.1、信创体系</h3><ol>
<li>信创体系覆盖<strong>2+8+N</strong>个领域：</li>
</ol>
<ul>
<li><strong>2</strong>：党、政</li>
<li><strong>8</strong>：金融、电力、电信、石油、交通、教育、医疗、航空航天8个关于国计民生的重要行业</li>
<li><strong>N</strong>：N个消费市场，如汽车、电子、家居等</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/a0fb55a3-8507-4993-a867-104bc50efb81.png"><br>2. 信创建设节奏：</p>
<ul>
<li>2023年已经从“关键环节、非核心业务、部分市场的局部试点”阶段走向“<strong>多环节、核心业务、多行业的全面覆盖</strong>”阶段<br><img src="https://files.mdnice.com/user/17335/c3f6c1a5-0f98-4b05-b018-89d5da573dcb.png"></li>
</ul>
<h3 id="2-2、信创产业链图谱"><a href="#2-2、信创产业链图谱" class="headerlink" title="2.2、信创产业链图谱"></a>2.2、信创产业链图谱</h3><p><img src="https://files.mdnice.com/user/17335/3faa4931-3af6-419b-bda5-73191e9e6469.png"></p>
<h3 id="2-3、-信创市场规模"><a href="#2-3、-信创市场规模" class="headerlink" title="2.3、 信创市场规模"></a>2.3、 信创市场规模</h3><ol>
<li>2023年信创产业市场规模预计为18710.59亿元，<strong>2025年将接近3.5万亿</strong>，2020年-2025年复合增长率达到 26.99%</li>
<li>2022年信创市场规模中，<strong>基础设施的市场规模占比54.54%，</strong>应用软件的市场规模占比37.08%，基础软件的市场规模占比6.49%，信息安全的市场规模占比1.89%</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/3646bc46-9dad-4019-9db5-9349108aab27.png"></p>
<p><img src="https://files.mdnice.com/user/17335/754a340b-a608-4be3-8d39-8ca213c9b178.png"></p>
<h2 id="3、信创发展趋势"><a href="#3、信创发展趋势" class="headerlink" title="3、信创发展趋势"></a>3、信创发展趋势</h2><h3 id="3-1、适配加速、生态裂变"><a href="#3-1、适配加速、生态裂变" class="headerlink" title="3.1、适配加速、生态裂变"></a>3.1、适配加速、生态裂变</h3><ul>
<li>厂商加速适配，生态快速裂变，未来3-5年信创产业将迎来爆发式增长：</li>
</ul>
<ol>
<li><strong>党政机关进入全面铺开阶段</strong>，未来3-5年内市场需求将持续放大；</li>
<li><strong>央国企市场进入加速采购期</strong>：以金融、电信、电力、交通等多行业加速进行国产厂商采购与替换，市场订单爆发式增长；</li>
<li><strong>采购顺序</strong>：<strong>硬件</strong>（包括基础设施、信息安全硬件）<strong>＞软件</strong>（包括基础软件、应用软件、信息安全软件）<blockquote>
<p>由于近年来芯片半导体等领域“卡脖子”的因素，硬件产品的替换紧迫性更强</p>
</blockquote>
</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/75a6a078-7c30-405f-9e78-b265f5e0bf1a.png"></p>
<h3 id="3-2、多领域并购整合"><a href="#3-2、多领域并购整合" class="headerlink" title="3.2、多领域并购整合"></a>3.2、多领域并购整合</h3><ul>
<li>由于相关政策扶持，信创相关细分行业的厂商开始大量出现，<strong>质量参差不齐</strong></li>
<li>随着未来3~5年市场需求趋于稳定，格局清晰，行业将逐渐进入整合期，<strong>优胜劣汰</strong></li>
<li>以数据库为例，未来3-5年，行业将会形成<strong>领导者+挑战者</strong>的格局，共同替换海外厂商的市场份额<br><img src="https://files.mdnice.com/user/17335/b94a19a5-4d5b-42e4-bf04-e6820befc41f.png"></li>
</ul>
<h3 id="3-3、AI大模型重塑生产力"><a href="#3-3、AI大模型重塑生产力" class="headerlink" title="3.3、AI大模型重塑生产力"></a>3.3、AI大模型重塑生产力</h3><ul>
<li>2022年11月ChatGPT问世，尤其是<strong>Chat GPT4.0引发国内“百模大战”</strong>，如阿里巴巴的通义大模型，百度的文心大模型、腾讯的混元大模型、华为的盘古大模型等</li>
<li>通过AI技术进行<strong>安全赋能、提升安全隐患检测能力、漏洞自动化修复</strong>等可以解决传统技术难以解决的安全问题</li>
<li>未来AI大模型将会广泛应用于<strong>司法机关、能源、金融、先进制造</strong>等行业，也将会为信创产业的发展，打开全新的空间</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/5e29b194-5a32-4103-b80d-ad397b758169.png"></p>
<h3 id="3-4、政策驱动变为市场驱动"><a href="#3-4、政策驱动变为市场驱动" class="headerlink" title="3.4、政策驱动变为市场驱动"></a>3.4、政策驱动变为市场驱动</h3><ul>
<li>信创的目的不是替代，而是自主、创新</li>
<li><strong>过去</strong>，以科研力量为导向促进国产关键技术自研能力的提升</li>
<li><strong>现阶段</strong>，信创发展驱动力为政策主导，各省政府通过财政补贴，促进供给端快速发展</li>
<li><strong>未来</strong>，信创产业的发展将以<strong>市场需求+技术赋能为主推动</strong>。</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/b69e8afe-ffec-486e-8ee1-54af6dd99bed.png"></p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>码字不易，欢迎<strong>关注、点赞</strong>，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/21-%E4%BF%A1%E5%88%9B%E5%8F%91%E5%B1%95%E4%B9%8B%E8%B7%AF/" data-id="cls9w8ke2000edkvh9n935o1i" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-20-阶段性总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/20-%E9%98%B6%E6%AE%B5%E6%80%A7%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.679Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="阶段性总结"><a href="#阶段性总结" class="headerlink" title="阶段性总结"></a>阶段性总结</h1><h2 id="1、发布原创文章10篇"><a href="#1、发布原创文章10篇" class="headerlink" title="1、发布原创文章10篇"></a>1、发布原创文章10篇</h2><ul>
<li>2024年初立过flag，本年度在要公众号发布原创文章10篇，目前已发表<strong>17</strong>篇，目标达成</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/544e722d-ef26-443b-83f1-4837371c1076.png"></p>
<ul>
<li>公众号主要用来分享个人日常服务器运维笔记，目前已发布文章主要分为两个主题：<ul>
<li><strong>服务器硬件科普系列</strong></li>
<li><strong>服务器管理平台开发系列</strong></li>
</ul>
</li>
<li>日前公司采购验收了大批信创国产服务器，如鲲鹏arm和海光X86，近期比较忙，后面计划整理发布一些关于<strong>信创服务器相关的科普知识</strong></li>
<li>目前关于服务器运维方面还是小学生水平，如文章中存在错误或不当之处，<strong>敬请批评指正</strong>！！！</li>
</ul>
<h2 id="2、完成一次半马"><a href="#2、完成一次半马" class="headerlink" title="2、完成一次半马"></a>2、完成一次半马</h2><ul>
<li>2024年初立过flag，本年度需要完成一次半马，目标达成</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/023ab81c-40bd-4fee-a214-140d5c8ba108.png"></p>
<blockquote>
<p>郑开马拉松已经开始报名，欢迎参加</p>
</blockquote>
<ul>
<li>友情提示：赛道途径郑开大道，虽然路途平坦，坡度爬升很小，但是前面<strong>27公里几乎没有任何遮荫，起跑时间相对较晚</strong>，如果当天温度较高，很容易跑崩，请注意！！！</li>
</ul>
<h2 id="3、Fit超过6000分钟"><a href="#3、Fit超过6000分钟" class="headerlink" title="3、Fit超过6000分钟"></a>3、Fit超过6000分钟</h2><ul>
<li>Fit健身app用了挺长时间了，个人感觉fit健身课程整体难度会比keep高一些，中间停歇时间也短，会更累！<br><img src="https://files.mdnice.com/user/17335/03792fbb-02a3-42e9-aaf5-d249e0eed3f3.png"></li>
</ul>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>欢迎关注，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/20-%E9%98%B6%E6%AE%B5%E6%80%A7%E6%80%BB%E7%BB%93/" data-id="cls9w8kdy000bdkvh8s8s57cd" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-19-小型机故障案例" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/19-%E5%B0%8F%E5%9E%8B%E6%9C%BA%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.664Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="小型机故障案例"><a href="#小型机故障案例" class="headerlink" title="小型机故障案例"></a>小型机故障案例</h1><p><img src="https://files.mdnice.com/user/17335/b0cafeb8-6461-4c50-af7b-33f15238cdd4.jpg"></p>
<ul>
<li>小型机往往应用于金融、电力、电信等行业，Unix操作系统和专用服务器RAS特性、纵向扩展性和高并发访问下的出色处理能力<strong>，如HP RX6600</strong></li>
<li>本文章记录在机房直连服务器进行故障原因排查及解决过程</li>
</ul>
<h2 id="故障现象"><a href="#故障现象" class="headerlink" title="故障现象"></a>故障现象</h2><blockquote>
<p>HP RX6600小型机关机后，重新开机ping不通，远程无法登陆</p>
</blockquote>
<h2 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h2><ol>
<li>小型机需要使用<strong>console线接入笔记本电脑，使用SecureCRT工具登录带外即MP</strong>，服务器前面板会说明带外用户名和密码（HP服务器用户名默认为Admin，密码为Admin），如果忘记，可以用笔按住后面板<strong>Reset</strong>小按钮<strong>5S以上</strong>，绿灯变为黄灯后释放</li>
<li>重新使用默认用户名和密码登陆服务器MP带外，查看电源状态，<strong>注意小型机加电为系统电和服务器电，此故障为系统未正常加电，导致无法进入系统</strong></li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ctrl-B 返回MP主目录  co  console  </span></span><br><span class="line"></span><br><span class="line">cm  <span class="comment"># Command Menu 命令菜单</span></span><br><span class="line"></span><br><span class="line">pc <span class="comment"># power control</span></span><br><span class="line"></span><br><span class="line">on <span class="comment"># power on 服务器上电,回车后输入 y 确认</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ps</span> <span class="comment"># power status 查看电源状态</span></span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/183a1e64-7c4f-4240-a7c6-96c5cefa3e7b.png"></p>
<ol start="3">
<li>查看发现服务器电源状态处于<strong>not available</strong>状态，尝试带外方式使机器上电power on，但是未生效，随后检查服务器后面板电源模块发现其中1个电源模块故障，<strong>拔除双电源线，然后重新插入正常电源线，对服务器带外正常加电</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cm # console</span><br><span class="line"></span><br><span class="line">pc # power control</span><br><span class="line"></span><br><span class="line">ps # power status 重新登录MP后发现服务器已正常加电</span><br><span class="line"></span><br><span class="line">ss # system status 查看系统进程状态</span><br><span class="line"></span><br><span class="line">pc # power control</span><br><span class="line"></span><br><span class="line">on # 再次确认电源状态，提示already on,已正常加电</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/32ac4778-15d6-4ca4-8e7b-3bda5f5c2312.png"></p>
<p><img src="https://files.mdnice.com/user/17335/e34fd9cd-92f8-489f-aa5c-f94464705977.png"></p>
<ol start="4">
<li>服务器正常上电后，进入MP主菜单，进入虚拟前面板查看已正常进入系统引导，<strong>等待10分钟左右即可尝试登录系统</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ctrl-B # 回到主菜单</span><br><span class="line"></span><br><span class="line">vfp # virtual Front Panel，查看是否正常进入引导</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&quot;Virtual Front Panel&quot;</span>（虚拟前面板）通常指的是一种软件界面或工具，用于模拟硬件设备的前面板或控制面板。这种模拟可以用于监控、控制和与实际设备进行交互，而无需实际物理连接。虚拟前面板通常用于测试、仿真、远程控制或培训等应用</span></span><br><span class="line"></span><br><span class="line">ctrl-B # 回到主菜单</span><br><span class="line"></span><br><span class="line">co # 再次确认已经正常进入引导</span><br></pre></td></tr></table></figure>

<p><img src="https://files.mdnice.com/user/17335/b04e85f2-de1e-4cf8-9a7d-dc60d2fffcbf.png"></p>
<p><img src="https://files.mdnice.com/user/17335/4f7bcea3-c9ac-46ce-814e-04e6c13bf914.png"></p>
<p><img src="https://files.mdnice.com/user/17335/a6b63ada-5d80-40f2-982a-0c0286f78bfc.png"></p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>欢迎关注，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/19-%E5%B0%8F%E5%9E%8B%E6%9C%BA%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/" data-id="cls9w8kdw000adkvh2vjsah7e" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-18-Zabbix交换分区使用率过高排查" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/18-Zabbix%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%E4%BD%BF%E7%94%A8%E7%8E%87%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.648Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Zabbix-High-swap-space-usage"><a href="#Zabbix-High-swap-space-usage" class="headerlink" title="Zabbix High swap space usage"></a>Zabbix High swap space usage</h1><h2 id="问题现象"><a href="#问题现象" class="headerlink" title="问题现象"></a>问题现象</h2><blockquote>
<p>Zabbix 出现Highswap space usage(less than 50% free)告警，提示交换分区空间使用率超过50%</p>
</blockquote>
<p><img src="https://files.mdnice.com/user/17335/5864687b-e2a1-4534-9db2-159ac05f9816.png"></p>
<p><img src="https://files.mdnice.com/user/17335/1ea8c9ca-ec89-472f-a55f-e90adc843e23.png"></p>
<h2 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h2><h3 id="1-确定swap分区是否已占满"><a href="#1-确定swap分区是否已占满" class="headerlink" title="1. 确定swap分区是否已占满"></a>1. 确定swap分区是否已占满</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/2c5a8e3d-501b-40c4-ae60-30f3fcf68c54.png"></p>
<p>登录Zabbix服务器检查内存情况，检查发现Linux服务器空闲的内存还有不少，但是使用了大量的Swap空间(超过50%）</p>
<h3 id="2-统计swap高占用进程"><a href="#2-统计swap高占用进程" class="headerlink" title="2. 统计swap高占用进程"></a>2. 统计swap高占用进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in /proc/*/status; do awk &#x27;/VmSwap|Name/&#123;printf $2 &quot; &quot; $3&#125;END&#123;print &quot;&quot;&#125;&#x27; $file; done | sort -k 2 -n -r | more</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/f45148b6-9774-4a16-8702-85b39c425bbb.png"></p>
<p><img src="https://files.mdnice.com/user/17335/fd45756c-cf31-4db6-a74d-68ad10e7022d.png"></p>
<p><img src="https://files.mdnice.com/user/17335/02a18710-7f5b-4433-b065-1fb4de348980.png"></p>
<p>不断下拉发现<strong>postmaster、zabbix_server</strong>进程数量相对比较多且内存占用量较大，虽然php-fpm有20多个进程，但是内存占用量比较小，gnome等其他进程数量则相对更少</p>
<h3 id="3-统计高进程内存占用量"><a href="#3-统计高进程内存占用量" class="headerlink" title="3. 统计高进程内存占用量"></a>3. 统计高进程内存占用量</h3><ul>
<li>统计zabbix_server进程数量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in /proc/*/status; do awk &#x27;/VmSwap|Name/&#123;printf $2 &quot; &quot; $3&#125;END&#123;print &quot;&quot;&#125;&#x27; $file; done | sort -k 2 -n -r | grep -wi &quot;zabbix_server&quot; | wc -l</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/fbcc832b-0211-4257-ae53-eef18bcf535b.png"></p>
<ul>
<li>统计zabbix_server进程占用内存大小</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for file in /proc/*/status; do awk &#x27;/VmSwap|Name/&#123;printf $2 &quot; &quot; $3&#125;END&#123;print &quot;&quot;&#125;&#x27; $file; done | sort -k 2 -n -r | grep -wi &quot;zabbix_server&quot; &gt; temp.ini</span><br><span class="line"></span><br><span class="line">sum=0</span><br><span class="line"></span><br><span class="line">for mem in `cat temp.ini | awk -F &#x27; &#x27; &#x27;&#123;print $2&#125;&#x27;`; do sum=$[$sum+$mem]; done</span><br><span class="line"></span><br><span class="line">echo $sum</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/49b6bfd6-ef42-4441-adc5-39eb661538bb.png"></p>
<p>同理可以计算postmaster等其他进程内存使用量</p>
<p><img src="https://files.mdnice.com/user/17335/2e1b1a93-a19c-449e-ab02-e3446b75e7a8.png"></p>
<p>最后统计发现，zabbix_server共有866个进程，占用2.2G的swap内存，接近swap已使用空间的大部分，属于异常情况，需要重启zabbix_server服务</p>
<h3 id="4-重启zabbix服务"><a href="#4-重启zabbix服务" class="headerlink" title="4. 重启zabbix服务"></a>4. 重启zabbix服务</h3><ul>
<li><strong>重启服务前建议对虚拟机进行快照，保存当前状态，便于快速回滚</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart zabbix-server</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/4804acdf-84c9-4cb6-85d2-0ee320a37a73.png"></p>
<p>检查swap交换空间内存发现已经恢复正常</p>
<blockquote>
<p>zabbix数据大量写入swap空间明显属于异常，可能是某个bug导致数据并未正常写入磁盘空间，有待进一步定位排查</p>
</blockquote>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>欢迎关注，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/18-Zabbix%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%E4%BD%BF%E7%94%A8%E7%8E%87%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5/" data-id="cls9w8kdv0009dkvh0suze0ro" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-17-服务器如何重置密码？" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/17-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%EF%BC%9F/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.632Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="服务器重置密码"><a href="#服务器重置密码" class="headerlink" title="服务器重置密码"></a>服务器重置密码</h1><blockquote>
<p>服务器存在多种操作系统，本篇文章仅以RedHat、银河麒麟、Win Server系统作为举例！</p>
</blockquote>
<ul>
<li>如果想了解更多服务器操作系统相关知识，请参看历史文章《服务器操作系统介绍》</li>
</ul>
<h2 id="银河麒麟破解密码"><a href="#银河麒麟破解密码" class="headerlink" title="银河麒麟破解密码"></a>银河麒麟破解密码</h2><blockquote>
<p>银河麒麟为国产Linux系统，UOS为国产Windows系统</p>
</blockquote>
<ol>
<li>开机进入引导界面，按<code>e</code>，输入用户名<code>root</code>密码<code>Kylin123123</code> ，进入内核编译界面<code>linux /vmlinuz</code>行添加<code>init=/bin/bash console=tty0</code>参数；</li>
<li>ctrl+x 进入<strong>单用户模式</strong></li>
<li><code>passwd  root</code>进行重置密码，两次输入确认</li>
<li><code>init 6</code>命令进行重启，重启后使用重置后密码登录即可</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/d7781d32-66c2-4b48-a49b-03eccf37d7f8.png"></p>
<h2 id="RedHat破解密码"><a href="#RedHat破解密码" class="headerlink" title="RedHat破解密码"></a>RedHat破解密码</h2><blockquote>
<p>RedHat破解密码为RHCSA科目必考试题</p>
</blockquote>
<p><img src="https://files.mdnice.com/user/17335/b9193cb1-bdeb-454d-9e71-60106b9f5273.png"></p>
<p><img src="https://files.mdnice.com/user/17335/a6d15230-39d8-4f8f-9f16-c4c5df2d196e.png"></p>
<p><img src="https://files.mdnice.com/user/17335/566d880c-9305-4d0a-9ffe-0e434c1e5625.png"></p>
<p><img src="https://files.mdnice.com/user/17335/43302cba-efcd-4119-a1a2-383ee5000b79.png"></p>
<p><img src="https://files.mdnice.com/user/17335/cf462881-448a-4849-80ec-f862da9a772b.png"></p>
<p><img src="https://files.mdnice.com/user/17335/f092e035-3913-4691-935b-08164ee17307.png"></p>
<p>重启完成后可以使用账户及密码进行登录验证</p>
<h2 id="win系列重置密码"><a href="#win系列重置密码" class="headerlink" title="win系列重置密码"></a>win系列重置密码</h2><blockquote>
<p>此处以PC端Windows系统重置密码操作举例，Win Server系统类似</p>
</blockquote>
<ol>
<li><p>将U盘插入我们忘记密码的电脑并打开电脑，按下电源键后我们还需要做一件事:狂按Delete进入<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=BIOS&spm=1001.2101.3001.7020">BIOS</a>(不同主板按键可能不同,具体可以自行上网查阅)</p>
</li>
<li><p>进入BIOS后通过方向键将光标移动至”启动”菜单，选择U盘启动项，点击进入</p>
</li>
<li><p>进入PE后，打开桌面上的“Windows密码修改”工具。</p>
</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/eaa85a78-fd62-4e3d-84ba-071a9ebecdec.png"></p>
<ol start="4">
<li><p>打开C:\WINDOWS\SYSTEM32\CONFIG\SAM 可列出本地全部的账户。</p>
</li>
<li><p>选中要修改的账户，点击解锁或更改密码，按照提示完成操作即可。</p>
</li>
<li><p>服务区系统win server也可使用PE工具进行密码重置</p>
</li>
</ol>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>公众号平台更改了推送规则，如果不想错过内容，请点击  “在看”  和 “赞”，感谢支持！</p>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/17-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81%EF%BC%9F/" data-id="cls9w8kdu0008dkvh3oor5b27" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-16-服务器进入救援模式如何解决" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/16-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E5%85%A5%E6%95%91%E6%8F%B4%E6%A8%A1%E5%BC%8F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.616Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="服务器进入救援模式"><a href="#服务器进入救援模式" class="headerlink" title="服务器进入救援模式"></a>服务器进入救援模式</h1><h2 id="案例1："><a href="#案例1：" class="headerlink" title="案例1："></a>案例1：</h2><blockquote>
<p>服务器重启之后进入救援模式，<strong>输入root密码后可以正常登录</strong></p>
</blockquote>
<p><img src="https://files.mdnice.com/user/17335/cb174679-ea65-4bca-b641-58480784c6f8.png"></p>
<ol>
<li><p>使用root密码正常进入，vi &#x2F;etc&#x2F;fstab文件查看启动项</p>
</li>
<li><p>一般是mount后删除挂载点文件，导致挂载点找不到文件，进入救援模式，顺序查看文件是否存在</p>
</li>
<li><p>对于文件不存在的挂载点，#注释后保存退出（也可以ssh远程登录后对于无效挂载点进行unmount）</p>
</li>
<li><p>重启，验证是否正常进入系统</p>
</li>
</ol>
<h2 id="案例2"><a href="#案例2" class="headerlink" title="案例2"></a>案例2</h2><blockquote>
<p>无效挂载点导致权限问题</p>
</blockquote>
<p>服务器重启之后进入救援模式，<strong>网卡down状态</strong>，后面板网卡灯不亮；ssh等服务无法通过systemctl restart sshd启动，页面提示：<strong>Authorization not available，Check if polkit service is running or see debug message</strong></p>
<p><img src="https://files.mdnice.com/user/17335/2ddbc320-1bae-4a74-9d6a-0bfa41848572.png"></p>
<ol>
<li>拉起网卡</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ip  a               # 查看所有网卡状态，发现都处于down的状态，后面板只有1根网线</span><br><span class="line"></span><br><span class="line">ethtool -p  enoX    # 通过该命令确认网线所属网口及对应网卡</span><br><span class="line"> </span><br><span class="line">ifup enoX           # 尝试使用systmctl restart network未生效，所以ifup拉起网卡</span><br><span class="line"> </span><br><span class="line">ip  a               # 检查确认网卡是否正常拉起，ping网关检查</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>尝试恢复sshd服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd   # 提示Authorization not available，Check if polkit service is running or see debug message</span><br><span class="line"></span><br><span class="line">journalctl -p err -b     # 查看启动时的错误日志，注意对应最新时间,查看确认为/data目录挂载点failed</span><br><span class="line"></span><br><span class="line">PS:截图为网图，真实环境未拍图，作为参考</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/a2002723-fda0-4673-8256-7711ba491e9f.png"></p>
<ol start="3">
<li>注释无效挂载点，重启恢复</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi  /etc/fstab     # vi进入对应启动模式挂载点文件</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注释/data对应行</span></span><br><span class="line"></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p><img src="https://files.mdnice.com/user/17335/3ca0d433-d1ca-4675-9b48-2ee86d2d6712.png"></p>
<h2 id="案例3"><a href="#案例3" class="headerlink" title="案例3"></a>案例3</h2><blockquote>
<p>更换硬盘后无法正常进入系统</p>
</blockquote>
<p>更换一块故障硬盘后，服务器开机进入救援模式，<strong>无法识别硬盘，无法正常进入系统</strong></p>
<ol>
<li>重启进入系统设置界面，尝试对硬盘做Raid</li>
</ol>
<ul>
<li>该服务器两块系统盘做Raid1，互为主备；其余6块硬盘做Raid0，更换其中一块故障硬盘后，重启进入系统设置界面，发现服务器无法正常识别新更换后的硬盘，故无法进行Raid处理</li>
</ul>
<ol start="2">
<li>重启进入救援模式，查看lsblk情况</li>
</ol>
<ul>
<li><p>救援模式下，使用lsblk -l  发现该服务器硬盘列表为sda-sdf，sda为Raid1系统盘，其他为Raid0数据盘，存在一块未识别硬盘</p>
</li>
<li><p>查看对应disk目录，<strong>发现disk0为空</strong>，其余disk1-disk4正常存在数据</p>
</li>
<li><p>vi &#x2F;etc&#x2F;fstab 尝试注释disk0相关挂载点，<strong>注意这里挂载点超过30行，无法手动注释</strong>，对fstab文件进行备份后，使用sed命令进行    <strong>sed -i  ‘s&#x2F;/mnt/disk0&#x2F;#/mnt/disk0&#x2F;g’</strong> 注释</p>
</li>
<li><p>执行后查看确认已注释，重启</p>
</li>
</ul>
<ol start="3">
<li><p>重启后发现仍无法进入系统，发现<strong>服务器启动时disk0存在uuid的挂载</strong>，可能导致disk0依旧会挂载，所以<strong>注释disk0对应的uuid行</strong>，重启</p>
</li>
<li><p>重启后恢复服务，确认注释空硬盘目录对应的无效挂载点后可恢复服务</p>
</li>
</ol>
<h2 id="案例4"><a href="#案例4" class="headerlink" title="案例4"></a>案例4</h2><blockquote>
<p>异常挂载点设置，重启进入救援模式</p>
</blockquote>
<ol>
<li>查看启动错误日志,提示<code>/tmp</code>挂载点异常</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -p err -b   </span><br></pre></td></tr></table></figure>


<ol start="2">
<li>查看fstab文件及lsblk逻辑卷挂载点情况</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fstab</span><br><span class="line"></span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure>


<p><img src="https://files.mdnice.com/user/17335/e2a26844-f53b-4ea8-8922-fe40e2b9404a.png"></p>
<p><img src="https://files.mdnice.com/user/17335/63ff0e25-36d9-4c2f-99e8-ab606769c239.png"></p>
<ol start="3">
<li>对比发现<code>/tmp</code>挂载点对应的<code>/dev/mapper/vg00-lv_tmp</code>逻辑卷只有20G，但是该挂载点设置默认大小为30G，大小不匹配导致异常，无法正常启动系统，修改<code>/etc/fstab</code>文件，去除<code>size=30G</code>，保存后重启系统解决<blockquote>
<p>服务器进入救援模式后，推荐使用案例4方法进行处理，首先通过启动错误日志定位问题，然后针对性进行处理，事半功倍！</p>
</blockquote>
</li>
</ol>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>公众号平台更改了推送规则，如果不想错过内容，请点击  “在看”  和 “赞”，感谢支持！</p>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/16-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E5%85%A5%E6%95%91%E6%8F%B4%E6%A8%A1%E5%BC%8F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3/" data-id="cls9w8kdt0007dkvh6zuj9g12" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-15-服务器机房上架交付流程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/15-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%BA%E6%88%BF%E4%B8%8A%E6%9E%B6%E4%BA%A4%E4%BB%98%E6%B5%81%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.600Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="服务器上架交付"><a href="#服务器上架交付" class="headerlink" title="服务器上架交付"></a>服务器上架交付</h1><blockquote>
<p>服务器到货验收后，会进行机房机房上架，完成重装系统、网络配置后交付使用</p>
</blockquote>
<h2 id="1、到货验收"><a href="#1、到货验收" class="headerlink" title="1、到货验收"></a>1、到货验收</h2><ul>
<li>采购服务器到货后，会联合多部门进行SN、配置、数量等多方面验收，如数量是否匹配，配置是否相符等</li>
<li>也会拆开机箱看看内部构造，了解下最新的服务器，箱体一般包含服务器、电源线、导轨3部分<br><img src="https://files.mdnice.com/user/17335/ce17ad35-8628-408a-bd7c-9a4a2a541c1a.png"></li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/fab9a800-84f0-4954-ac1d-264bb8386433.png"></p>
<p><img src="https://files.mdnice.com/user/17335/c6a678cd-03b2-4eda-a80b-d239d385cfa1.png"></p>
<h2 id="2、上架"><a href="#2、上架" class="headerlink" title="2、上架"></a>2、上架</h2><ol>
<li>参考机柜空闲程度和网络配置等，选定服务器安装具体位置，机柜一般为42U或者47U，现在大多数服务器为2U，服务器之间间隔1U保证有效散热即可，更多服务器基础科普可以参考历史文章《服务器介绍》</li>
</ol>
<p><img src="https://files.mdnice.com/user/17335/b0e9523a-dadb-4c04-a81b-3a92c34d9037.png"></p>
<p><img src="https://files.mdnice.com/user/17335/2992340e-0a8a-4074-b384-39208cc95b90.png"></p>
<p><img src="https://files.mdnice.com/user/17335/f875b70c-2f45-4d44-94b4-15dbb49101d0.png"></p>
<ol start="2">
<li>安装导轨或者托盘，上架服务器，注意电源为16A还是10A，不要插错，需要接入AB双路电源</li>
<li>同一机柜需要考虑不能超出机柜的额定功率，否则容易造成安全隐患</li>
</ol>
<h2 id="3、配置"><a href="#3、配置" class="headerlink" title="3、配置"></a>3、配置</h2><h3 id="3-1、重装系统"><a href="#3-1、重装系统" class="headerlink" title="3.1、重装系统"></a>3.1、重装系统</h3><p><img src="https://files.mdnice.com/user/17335/2a4b8702-4937-4f23-a37a-72bbdab4099b.png"></p>
<ul>
<li><p>服务器加电后，检查状态灯是否正常，配置Raid，一般为Raid5，硬盘介绍可以参考历史文章《服务器硬盘介绍》</p>
</li>
<li><p>重装系统，按照要求分配硬盘、进行IP网络配置，验证网关是否ping通，系统介绍可以参考历史文章《服务器操作系统介绍》</p>
</li>
</ul>
<h3 id="3-2、网络配置"><a href="#3-2、网络配置" class="headerlink" title="3.2、网络配置"></a>3.2、网络配置</h3><p><img src="https://files.mdnice.com/user/17335/b1bdc017-5df4-4d10-a509-0aa73ee00052.png"></p>
<ol>
<li>一般服务器需要配置带外、业务、管理等多条光纤或者网线，根据网络要求选择服务器光口或电口进行跳线，注意合理配置交换机端口及合理布线.网卡介绍可以参考文章《服务器网卡介绍》<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ip a # 查看服务器网卡状态</span><br><span class="line"></span><br><span class="line">ethtool -p enoX # 如服务器存在多个网卡UP，需要确认网卡对应网口，合理跳线及配置交换机端口</span><br><span class="line"></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enoX # 设置网卡配置文件，修改static静态IP，IPADDR、网关、子网掩码，保存退出</span><br><span class="line"></span><br><span class="line">systemctl restart network # 重启网络使配置生效，也可以ifup、ifdown,注意不同品牌或系统可能命令稍有差异</span><br><span class="line"></span><br><span class="line">ping gateway # ping网关测试验证</span><br><span class="line">服务器按照要求可以配置带外IP</span><br><span class="line">Del进入SetUp页面</span><br><span class="line">修改BMC地址，使用静态IP，注意浪潮需要关闭share Link功能，否则带外及业务配置后网络不通</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-3、烤机"><a href="#3-3、烤机" class="headerlink" title="3.3、烤机"></a>3.3、烤机</h3><ul>
<li>烤机是一种用于测试服务器硬件稳定性和性能的方法。它涉及让服务器持续运行24小时或更长时间，通过这种方式来检查服务器在高负载下的表现。</li>
<li>烤机的目的是找出硬件是否存在潜在问题，用来验证其质量是否符合宣传标准</li>
<li>在烤机过程中，服务器通常会运行一些大型程序或软件，这会导致硬件的温度升高，因此有时被比喻为类似烧烤的过程。</li>
<li>大型云厂商一般在烤机前会预装统一操作系统，烤机3-7天后，按照客户要求安装重装指定操作系统，作为母机交付使用</li>
</ul>
<h2 id="4、交付"><a href="#4、交付" class="headerlink" title="4、交付"></a>4、交付</h2><p><img src="https://files.mdnice.com/user/17335/759ac974-928f-4d46-a37f-7f9119ba5578.png"></p>
<ul>
<li>服务器交付使用部门后，运维人员需要记录服务器资产编码、序列号、位置，更新到数据库，做好IP、用途等信息备注</li>
</ul>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>公众号平台更改了推送规则，如果不想错过内容，请点击  “在看”  和 “赞”，感谢支持！</p>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/15-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%BA%E6%88%BF%E4%B8%8A%E6%9E%B6%E4%BA%A4%E4%BB%98%E6%B5%81%E7%A8%8B/" data-id="cls9w8kdr0006dkvhb13vc1pz" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-14-服务器管理平台（6）- Utils" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/06/14-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%EF%BC%886%EF%BC%89-%20Utils/" class="article-date">
  <time class="dt-published" datetime="2024-02-06T05:00:55.582Z" itemprop="datePublished">2024-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Utils"><a href="#Utils" class="headerlink" title="Utils"></a>Utils</h1><ul>
<li>本篇为服务器管理平台的结篇，讲述一些必要的Util，如钉钉告警、安全加密、远程登录等功能的实现</li>
</ul>
<h2 id="1、钉钉告警"><a href="#1、钉钉告警" class="headerlink" title="1、钉钉告警"></a>1、钉钉告警</h2><h3 id="1-1、SQL配置告警规则"><a href="#1-1、SQL配置告警规则" class="headerlink" title="1.1、SQL配置告警规则"></a>1.1、SQL配置告警规则</h3><ol>
<li><p>逻辑磁盘容量已使用比例超过90%</p>
</li>
<li><p>超过30天未登录</p>
</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>字段名称</td>
<td>字段类型</td>
<td>解释</td>
</tr>
<tr>
<td>Id</td>
<td>int</td>
<td>自增ID</td>
</tr>
<tr>
<td>Table</td>
<td>string</td>
<td>监测表名</td>
</tr>
<tr>
<td>Metric</td>
<td>string</td>
<td>监测指标</td>
</tr>
<tr>
<td>Template</td>
<td>string</td>
<td>告警模版</td>
</tr>
<tr>
<td>Frequency</td>
<td>string</td>
<td>告警频率</td>
</tr>
<tr>
<td>Threshold</td>
<td>string</td>
<td>指标阈值</td>
</tr>
<tr>
<td>CreatedAt</td>
<td>timestamp</td>
<td>创建时间</td>
</tr>
<tr>
<td>UpdatedAt</td>
<td>timestamp</td>
<td>修改时间</td>
</tr>
</tbody></table>
<h3 id="1-2、Shell定时轮询"><a href="#1-2、Shell定时轮询" class="headerlink" title="1.2、Shell定时轮询"></a>1.2、Shell定时轮询</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 打开定时任务配置文件</span></span></span><br><span class="line"></span><br><span class="line">crontab -e</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 指定每个工作日上午11:10定时执行脚本，并把执行脚本的日志写入文件 result.log</span></span></span><br><span class="line"></span><br><span class="line">10 11 * * 1,2,3,4,5 sh [alert.sh](http://alert.sh) &gt; result.log</span><br></pre></td></tr></table></figure>

<h3 id="1-3、核心功能函数"><a href="#1-3、核心功能函数" class="headerlink" title="1.3、核心功能函数"></a>1.3、核心功能函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> openUrl = <span class="string">&quot;https://oapi.dingtalk.com/robot/send?access_token=43e4ad2bcbbef692c7652b9eecca6fd51a0db9e544edcb579640e78f71259006&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NotifyHandler NotifyHandler</span></span><br><span class="line"><span class="keyword">type</span> NotifyHandler <span class="keyword">struct</span> &#123;</span><br><span class="line">	web.BaseHandler</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// POST method</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(NotifyHandler)</span></span> POST(ctx *web.Context) &#123;</span><br><span class="line">	<span class="comment">//1.根据POST表单拼接SQL</span></span><br><span class="line">	<span class="keyword">var</span> rules []model.AlertRule</span><br><span class="line">	rules, err := model.GetRules()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		ctx.JSON(<span class="string">&quot;Describe AlertRule&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2. 查询记录匹配告警模版</span></span><br><span class="line">	<span class="keyword">for</span> _, rule := <span class="keyword">range</span> rules &#123;</span><br><span class="line">		<span class="keyword">switch</span> rule.Table &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;es_logicaldisk&quot;</span>:</span><br><span class="line">			threshold, err := strconv.Atoi(rule.Threshold)</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				ctx.JSON(<span class="string">&quot;Describe AlertRule Threshold ,table es_logicaldisk&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			disks, err := model.GetDiskInfo(threshold)</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				ctx.JSON(<span class="string">&quot;Describe GetDiskInfo Fail&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(disks) != <span class="number">0</span> &#123;</span><br><span class="line">				<span class="keyword">for</span> _, disk := <span class="keyword">range</span> disks &#123;</span><br><span class="line">					alarmStr := fmt.Sprintf(<span class="string">&quot;时间: %s\n告警标题：逻辑磁盘容量超出%v\n业务IP：%v\n序列号:%v\n磁盘：%v使用百分比%v&quot;</span>,</span><br><span class="line">						time.Now().Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>), rule.Threshold, disk.BusinessIp, disk.SN, disk.Filesystem, disk.UsePercent)</span><br><span class="line">					err := notify.SendDingCh(openUrl, alarmStr)</span><br><span class="line">					<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">						ctx.JSON(<span class="string">&quot;Describe LogicalDisk&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">						<span class="keyword">return</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;es_logininfo&quot;</span>:</span><br><span class="line">			logins, err := model.GetLoginInfo()</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				ctx.JSON(<span class="string">&quot;Describe GetLoginInfo Fail&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(logins) != <span class="number">0</span> &#123;</span><br><span class="line">				<span class="keyword">for</span> _, login := <span class="keyword">range</span> logins &#123;</span><br><span class="line">					alarmStr := fmt.Sprintf(<span class="string">&quot;时间: %s\n告警标题：超过30天未登录\n业务IP：%v\n序列号:%v\n上次登录时间：%v\n,距今间隔：%v&quot;</span>,</span><br><span class="line">						time.Now().Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>), login.BusinessIp, login.SN, login.StartTime, login.Interval)</span><br><span class="line">					err := notify.SendDingCh(openUrl, alarmStr)</span><br><span class="line">					<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">						ctx.JSON(<span class="string">&quot;Describe LoginInfo&quot;</span>, <span class="number">101</span>, err)</span><br><span class="line">						<span class="keyword">return</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ctx.JSON(fmt.Sprintf(<span class="string">&quot;ALL Alert Info Already send&quot;</span>), <span class="number">0</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="1-4、结果验证"><a href="#1-4、结果验证" class="headerlink" title="1.4、结果验证"></a>1.4、结果验证</h3><p><img src="https://files.mdnice.com/user/17335/e0c85da8-e16e-4436-ae43-a996312eed46.png"></p>
<h2 id="2、数据安全加密"><a href="#2、数据安全加密" class="headerlink" title="2、数据安全加密"></a>2、数据安全加密</h2><h3 id="2-1、Token鉴权"><a href="#2-1、Token鉴权" class="headerlink" title="2.1、Token鉴权"></a>2.1、Token鉴权</h3><ul>
<li>根据web访问来源平台，分配不同Token进行鉴权识别，不同Token标识不同平台，权限不同，如web链接访问无删除权限</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/049f30fc-6e24-495a-89c4-42fa29568d14.png"></p>
<h3 id="2-2、权限分级及加密存储"><a href="#2-2、权限分级及加密存储" class="headerlink" title="2.2、权限分级及加密存储"></a>2.2、权限分级及加密存储</h3><ul>
<li>平台账户分级，不同权限可访问界面不同<br><img src="https://files.mdnice.com/user/17335/fe427fd0-fdc9-42d6-a6e5-a897fa2c720f.png"></li>
<li>账户密码加密存储<br><img src="https://files.mdnice.com/user/17335/be9e298a-a9c3-4660-8848-ad38239bd1b4.png"></li>
</ul>
<h2 id="3、远程登录"><a href="#3、远程登录" class="headerlink" title="3、远程登录"></a>3、远程登录</h2><h3 id="3-1、Ansible实现"><a href="#3-1、Ansible实现" class="headerlink" title="3.1、Ansible实现"></a>3.1、Ansible实现</h3><ul>
<li>安装<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 安装Ansible</span></span></span><br><span class="line">    yum install -y ansible</span><br><span class="line">    yum install -y sshpass</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 修改配置，忽略告警</span></span></span><br><span class="line">    vim /etc/ansible/ansible.cfg</span><br><span class="line">    </span><br><span class="line">    [defaults]</span><br><span class="line"></span><br><span class="line">host_key_checking = False # 第一次远程ssh主机需要将机器指纹添加到known_hosts，此设置忽略该步骤</span><br><span class="line">    command_warnings=False  #忽略ansible执行命令的告警信息</span><br><span class="line">    deprecation_warnings=False</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 增加test用户组</span></span></span><br><span class="line">    vim /etc/ansible/hosts</span><br><span class="line">    </span><br><span class="line">    [test]</span><br><span class="line">    127.0.0.1 ansible_ssh_user=root ansible_ssh_port=22 ansible_ssh_pass=xxx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 执行命令,验证功能</span></span></span><br><span class="line">  ansible test -m shell -a &#x27;lspci&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 批量机器登录 + 执行shell命令</span></span></span><br><span class="line">1. ip列表写入ip_list.ini</span><br><span class="line">2. 执行脚本</span><br><span class="line">    sh auto_ssh.sh $Password</span><br></pre></td></tr></table></figure></li>
<li>auto_ssh.sh<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ -s ./result.ini ] ; then</span><br><span class="line">    &gt; result.ini</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">Password=$1</span><br><span class="line">sed -i &#x27;/ansible_ssh/d&#x27; /etc/ansible/hosts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加机器信息</span></span><br><span class="line">for Ip in $(cat ip_list.ini)</span><br><span class="line">  do</span><br><span class="line"></span><br><span class="line">      Username=&quot;root&quot;</span><br><span class="line">      echo -e &quot;$Ip ansible_ssh_user=$Username ansible_ssh_port=22 ansible_ssh_pass=$Password&quot; &gt;&gt; /etc/ansible/hosts</span><br><span class="line"></span><br><span class="line">  done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[<span class="built_in">test</span>]用户组 执行命令</span></span><br><span class="line">ansible test -m shell -a &#x27;lspci&#x27; &gt; result.ini</span><br><span class="line">echo &quot;All Hosts Ansible Done , please check result.ini ! ! !&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-2、Expect实现"><a href="#3-2、Expect实现" class="headerlink" title="3.2、Expect实现"></a>3.2、Expect实现</h3><ul>
<li>安装<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 安装expect</span></span></span><br><span class="line">  yum install -y expect</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 单台机器登录</span></span></span><br><span class="line">  sh login.sh $Ip $Pwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 单台机器登录 + 执行shell命令</span></span></span><br><span class="line">1. 执行命令写入execute_cmd.ini</span><br><span class="line">2. 执行脚本</span><br><span class="line">  sh cmd_login.sh $Ip $Pwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 批量机器登录 + 执行shell命令</span></span></span><br><span class="line">1. ip列表加入ip_list.ini</span><br><span class="line">2. 执行命令写入execute_cmd.ini</span><br><span class="line">3. 执行脚本</span><br><span class="line">sh list_cmd_login.sh $Pwd</span><br></pre></td></tr></table></figure></li>
<li>auto_ssh.sh<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/expect</span></span><br><span class="line"></span><br><span class="line">set user &quot;root&quot;</span><br><span class="line">set host [lindex $argv 0]</span><br><span class="line">set port &quot;22&quot;</span><br><span class="line">set password [lindex $argv 1]</span><br><span class="line"></span><br><span class="line">spawn ssh -p$port $user@$host</span><br><span class="line">expect &#123;</span><br><span class="line">     &quot;*yes/no&quot; &#123; send &quot;yes\r&quot;; exp_continue &#125;</span><br><span class="line">     &quot;*assword:&quot; &#123; send &quot;$&#123;password&#125;\r&quot; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">interact</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><ul>
<li>欢迎关注，感谢支持！</li>
</ul>
<p><img src="https://files.mdnice.com/user/17335/d74ef8ef-f9e5-47f3-ab0f-1406aa0ffe50.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rendong3.github.io/2024/02/06/14-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%EF%BC%886%EF%BC%89-%20Utils/" data-id="cls9w8kdq0005dkvhdqiq34ad" data-title="" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/02/06/6-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BD%91%E5%8D%A1%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/06/5-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/06/4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E5%AD%98%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/06/3-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A1%AC%E7%9B%98%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/06/2-%E6%9C%8D%E5%8A%A1%E5%99%A8CPU%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>